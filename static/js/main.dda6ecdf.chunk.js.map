{"version":3,"sources":["assets/aupmod.gif","assets/space-snoo.png","store.js","variants.js","components/TopPost.jsx","containers/Feed.jsx","reducers/err.js","actions/types.js","reducers/fetchState.js","reducers/searchField.js","reducers/topPosts.js","reducers/index.js","actions/err.js","actions/setFetch.js","containers/SearchField.jsx","hooks.js","actions/searchField.js","actions/reddit.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","preloadedState","errVariants","hidden","opacity","visible","postVariants","hover","backgroundColor","scale","initial","TopPost","data","li","animate","exit","variants","whileHover","className","href","link","rel","target","title","subreddit","src","upvote","alt","score","Feed","feed","useSelector","state","topPosts","length","map","p","key","id","err","action","type","message","fetchState","searchField","input","age","newFeed","slice","newAge","postToRemove","splice","newAgeIndex","findIndex","removeID","pop","push","permalink","sort","a","b","unshift","rootReducer","combineReducers","localStorageState","localStorage","getItem","JSON","parse","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","setErr","setFetch","SearchField","useEffect","errMessage","inputText","inputRef","useRef","numPosts","prevFetchState","val","ref","current","usePrevVal","dispatch","useDispatch","focus","placeholderTxt","inputCSSClasses","btnCSSClasses","disabled","placeholder","value","onChange","e","onClick","preventDefault","fetch","then","res","ok","text","Error","regExp","match","topPost","subredditData","replace","children","i","currPost","stickied","postAlreadyExists","getState","addTopPost","catch","App","unsubscribe","subscribe","s","setItem","stringify","SpaceSnoo","Boolean","window","location","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dda6ecdf.chunk.js","sourcesContent":["module.exports = \"data:image/gif;base64,R0lGODlhDwAOALMOAP+Ta/+Zc/+sjf+jgf+bdv+mhv+6of+tjv+KXv+zl/+/p/+Vbf+MYf+LYP///wAAACH5BAEAAA4ALAAAAAAPAA4AAARB0MnpGL2UAYvzagvXMUFjBmJWmmdafSwbTgxsIvFcL3zI7D1XAUAsdCYHgvJwlCQG0ETTYRBYDVNFYqvIKr5dSgQAOw==\"","module.exports = __webpack_public_path__ + \"static/media/space-snoo.0f9fec70.png\";","/* REDUX STORE */\nimport { applyMiddleware, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk'\nimport reducers from './reducers'\n\nlet preloadedState\nconst localStorageState = localStorage.getItem('redux')\nif (localStorageState) preloadedState = JSON.parse(localStorageState)\n\nconst store = createStore(\n  reducers,\n  preloadedState,\n  composeWithDevTools(applyMiddleware(thunk))\n)\n\nexport default store\n","export const errVariants = { hidden: { opacity: 0 }, visible: { opacity: 1 } }\n\nexport const postVariants = {\n  ...errVariants,\n  hover: {\n    backgroundColor: '#c3dafe',\n    scale: 1.1,\n  },\n  initial: {\n    opacity: 0,\n    backgroundColor: '#c6f6d5',\n  },\n  visible: {\n    opacity: 1,\n    backgroundColor: '#fff',\n  },\n}\n","import React from 'react'\nimport { motion } from 'framer-motion'\nimport { postVariants } from '../variants'\nimport upvote from '../assets/aupmod.gif'\n\n/**\n * Item for top post in feed\n * @param {Object} data Top post data\n */\nconst TopPost = ({ data }) => (\n  <motion.li\n    animate=\"visible\"\n    exit=\"hidden\"\n    initial=\"initial\"\n    variants={postVariants}\n    whileHover=\"hover\"\n    className=\"bg-white mb-4 py-2 px-4 rounded transition-colors\"\n  >\n    <a href={data.link} rel=\"noopener noreferrer\" target=\"_blank\">\n      <h1 className=\"font-bold text-lg\">{data.title}</h1>\n      <div className=\"flex flex-row justify-between\">\n        <p className=\"mt-2 text-gray-700\">{`r/${data.subreddit}`}</p>\n        <p className=\"flex flex-row items-center mt-2\">\n          <img src={upvote} alt=\"upvote\" className=\"h-4 mr-1\" />\n          <span className=\"font-bold text-orange-500\">{data.score}</span>\n        </p>\n      </div>\n    </a>\n  </motion.li>\n)\n\nexport default TopPost\n","import React from 'react'\nimport { AnimatePresence } from 'framer-motion'\nimport { useSelector } from 'react-redux'\nimport TopPost from '../components/TopPost'\n\n/**\n * Feed of top subreddit posts\n */\nconst Feed = () => {\n  const feed = useSelector((state) => state.topPosts.feed)\n\n  let content\n  if (feed.length > 0) {\n    content = (\n      <ul className=\"mt-16\">\n        <AnimatePresence>\n          {feed.map((p) => (\n            <TopPost key={p.id} data={p} />\n          ))}\n        </AnimatePresence>\n      </ul>\n    )\n  } else {\n    content = (\n      <p className=\"italic mt-64 text-center text-gray-500\">\n        Don't let your memes just be dreams. Add a top post now.\n      </p>\n    )\n  }\n\n  return content\n}\n\nexport default Feed\n","import { SET_ERR } from '../actions/types'\n\nconst err = (state = '', action) => {\n  switch (action.type) {\n    case SET_ERR:\n      return action.message\n    default:\n      return state\n  }\n}\n\nexport default err\n","export const ADD_SUBREDDIT = 'ADD_SUBREDDIT'\nexport const ADD_TOP_POST = 'ADD_POST'\nexport const SET_ERR = 'SET_ERR'\nexport const SET_FETCH = 'SET_FETCH'\nexport const UPDATE_SEARCH_FIELD = 'UPDATE_SEARCH_FIELD'\n","import { SET_FETCH } from '../actions/types'\n\nconst fetchState = (state = false, action) => {\n  switch (action.type) {\n    case SET_FETCH:\n      return action.state\n    default:\n      return state\n  }\n}\n\nexport default fetchState\n","import { ADD_TOP_POST, UPDATE_SEARCH_FIELD } from '../actions/types'\n\nconst initialState = ''\n\nconst searchField = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_TOP_POST:\n      return initialState // Reset search field when successful top post was added\n    case UPDATE_SEARCH_FIELD:\n      return action.input\n    default:\n      return state\n  }\n}\n\nexport default searchField\n","import { ADD_TOP_POST } from '../actions/types'\n\nconst topPosts = (state = { age: [], feed: [] }, action) => {\n  switch (action.type) {\n    case ADD_TOP_POST:\n      const newFeed = state.feed.slice()\n      const newAge = state.age.slice()\n\n      if (action.postToRemove) {\n        // Remove top post to be replaced in feed\n        newFeed.splice(action.postToRemove.id, 1)\n\n        // Remove top post to be replaced from age\n        const newAgeIndex = newAge.findIndex(action.postToRemove.id)\n        if (newAgeIndex > -1) newAge.splice(newAgeIndex, 1)\n      }\n\n      if (state.age.length > 9) {\n        // Remove the oldest subreddit top post when queue has reached max capacity\n        const removeID = newAge.pop()\n        newFeed.splice(\n          newFeed.findIndex((p) => p.id === removeID),\n          1\n        )\n      }\n\n      // Update feed\n      newFeed.push({\n        id: action.data.data.id,\n        score: action.data.data.score,\n        subreddit: action.data.data.subreddit,\n        title: action.data.data.title,\n        link: `https://reddit.com${action.data.data.permalink}`,\n      })\n\n      newFeed.sort((a, b) => {\n        return b.score - a.score\n      })\n\n      // Update age\n      newAge.unshift(action.data.data.id)\n\n      return {\n        age: newAge,\n        feed: newFeed,\n      }\n    default:\n      return state\n  }\n}\n\nexport default topPosts\n","import { combineReducers } from 'redux'\nimport err from './err'\nimport fetchState from './fetchState'\nimport searchField from './searchField'\n// import subreddit from './subreddit'\nimport topPosts from './topPosts'\n\nconst rootReducer = combineReducers({\n  err,\n  fetchState,\n  searchField,\n  // subreddit,\n  topPosts,\n})\n\nexport default rootReducer\n","import { SET_ERR } from './types'\n\n/**\n * Set error message\n * @param {string} message Error message\n * @return {Object} SET_ERR action\n */\nexport const setErr = (message = '') => ({\n  type: SET_ERR,\n  message,\n})\n","import { SET_FETCH } from './types'\n\n/**\n * Set fetch state\n * @param {boolean} state State of fetch progress\n */\nexport const setFetch = (state) => ({\n  type: SET_FETCH,\n  state,\n})\n","import React, { useEffect, useRef } from 'react'\nimport { AnimatePresence, motion } from 'framer-motion'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { errVariants } from '../variants'\nimport { fetchAPI, setErr, setFetch, updateSearchField } from '../actions'\nimport { usePrevVal } from '../hooks'\n\n/**\n * Search field and button\n */\nconst SearchField = () => {\n  const errMessage = useSelector((state) => state.err)\n  const fetchState = useSelector((state) => state.fetchState)\n  const inputText = useSelector((state) => state.searchField)\n  const inputRef = useRef(null)\n  const numPosts = useSelector((state) => state.topPosts.age.length)\n  const prevFetchState = usePrevVal(fetchState)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    // Focus on search field first on page load\n    if (inputRef.current) inputRef.current.focus()\n  }, [])\n\n  useEffect(() => {\n    if (inputRef.current && prevFetchState && !fetchState) {\n      // Focus search field input again if a new err occurs\n      inputRef.current.focus()\n    }\n  }, [fetchState])\n\n  const searchHandler = (e) => {\n    e.preventDefault()\n    if (errMessage) dispatch(setErr())\n    dispatch(setFetch(true))\n    dispatch(fetchAPI(inputText))\n  }\n\n  let err\n  if (errMessage)\n    err = (\n      <motion.p\n        animate=\"visible\"\n        exit=\"hidden\"\n        initial=\"hidden\"\n        variants={errVariants}\n        className=\"bg-red-100 border border-red-600 mt-4 py-2 px-4 rounded text-red-600\"\n      >\n        {errMessage}\n      </motion.p>\n    )\n\n  let placeholderTxt\n  if (numPosts < 1) placeholderTxt = 'Type a subreddit name here...'\n  else placeholderTxt = 'Type another subreddit name here...'\n\n  let inputCSSClasses =\n    'border border-gray-300 flex-1 mr-2 py-2 px-4 rounded text-xl'\n  let btnCSSClasses =\n    'bg-indigo-500 hover:bg-indigo-700 py-2 px-4 rounded text-white text-xl transition-colors'\n  if (fetchState) {\n    inputCSSClasses += ' cursor-not-allowed'\n    btnCSSClasses += ' opacity-50 cursor-not-allowed'\n  }\n\n  return (\n    <>\n      <form className=\"flex justify-evenly\">\n        <input\n          ref={inputRef}\n          type=\"text\"\n          disabled={fetchState}\n          placeholder={placeholderTxt}\n          value={inputText}\n          onChange={(e) => dispatch(updateSearchField(e.target.value))}\n          className={inputCSSClasses}\n        />\n        <button\n          disabled={fetchState}\n          onClick={searchHandler}\n          className={btnCSSClasses}\n        >\n          Add Post\n        </button>\n      </form>\n      <AnimatePresence>{err}</AnimatePresence>\n    </>\n  )\n}\n\nexport default SearchField\n","/* CUSTOM HOOKS */\nimport { useEffect, useRef } from 'react'\n\nexport const usePrevVal = (val) => {\n  const ref = useRef(null)\n\n  useEffect(() => {\n    ref.current = val\n  }, [val])\n\n  return ref.current\n}\n\nexport default useEffect\n","import { UPDATE_SEARCH_FIELD } from './types'\n\n/**\n * Update search field input\n * @param {string} input Input from search field\n * @return {Object} UPDATE_SEARCH_FIELD action\n */\nexport const updateSearchField = (input) => ({\n  type: UPDATE_SEARCH_FIELD,\n  input,\n})\n","import { ADD_TOP_POST, ADD_SUBREDDIT } from './types'\nimport { setErr, setFetch } from '../actions'\nimport store from '../store'\n\n/**\n * Add subreddit response data\n * @param {string} name subreddit name from search field\n * @param {Object} data subreddit response data\n * @return {Object} ADD_SUBREDDIT action\n */\nexport const addSubreddit = (name, data) => ({\n  type: ADD_SUBREDDIT,\n  name,\n  data,\n})\n\n/**\n * Add new top post.\n * Remove existing top post if it's from the same subreddit.\n * @param {Object} data Post data from reddit API\n * @param {Object} postToRemove Data for post to remove\n * @return {Object} ADD_TOP_POST action\n */\nexport const addTopPost = (data, postToRemove) => ({\n  type: ADD_TOP_POST,\n  data,\n  postToRemove,\n})\n\n/**\n * Fetch subreddit data from reddit API.\n * Handle asynchronous call with redux-thunk.\n * @param {string} subreddit subreddit ID\n * @return {Function} Thunk that performs fetch request to reddit API\n */\nexport const fetchAPI = (subreddit) => (dispatch) => {\n  fetch(`https://www.reddit.com/r/${subreddit}.json?jsonp=foo`)\n    .then((res) => {\n      if (res.ok) return res.text()\n      throw new Error('The API responded with an error in the response.')\n    })\n    .then((text) => {\n      // Remove JSONP wrapper in a very hacky way\n      const regExp = /(^\\/\\*\\*\\/foo\\()|(\\)$)/g\n      const match = text.match(regExp)\n      if (match) {\n        const subredditData = JSON.parse(text.replace(regExp, ''))\n\n        // DEBUG: Store API res data for debugging purposes\n        // dispatch(addSubreddit(subreddit, subredditData))\n\n        // Throw err if there are no posts\n        if (subredditData.data.children < 1) {\n          throw new Error('This subreddit has no posts.')\n        }\n\n        // Find top post in data (filter through stickied)\n        let topPost\n\n        for (let i = 0; i < subredditData.data.children.length; i += 1) {\n          const currPost = subredditData.data.children[i]\n\n          if (!currPost.data.stickied) {\n            topPost = currPost\n            break\n          }\n        }\n\n        // If all posts are stickied, just use first stickied post\n        if (!topPost) topPost = subredditData.data.children[0]\n\n        // Find if post from this subreddit already exists\n        let postAlreadyExists = false\n        let postToRemove\n        const { topPosts } = store.getState()\n        const { feed } = topPosts\n        for (let i = 0; i < feed.length; i += 1) {\n          const p = feed[i]\n          if (p.subreddit === topPost.data.subreddit) {\n            // Find out if the new post is the different than the current post\n            if (p.id === topPost.data.id) {\n              postAlreadyExists = true\n            } else {\n              postToRemove = { i, id: p.id }\n            }\n            break\n          }\n        }\n\n        if (postAlreadyExists) {\n          dispatch(setErr('The new top post already exists in the feed.'))\n        } else {\n          dispatch(addTopPost(topPost, postToRemove))\n        }\n        dispatch(setFetch(false))\n      } else {\n        throw new Error(\n          'Invalid response format from reddit API or no subreddit was found.'\n        )\n      }\n    })\n    .catch((err) => {\n      dispatch(setErr(err.message))\n      dispatch(setFetch(false))\n    })\n}\n","import React, { useEffect } from 'react'\r\nimport Feed from './containers/Feed'\r\nimport SearchField from './containers/SearchField'\r\nimport SpaceSnoo from './assets/space-snoo.png'\r\nimport store from './store'\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    // Store latest Redux state in local storage to persist sessions\r\n    const unsubscribe = store.subscribe(() => {\r\n      const s = store.getState()\r\n      localStorage.setItem(\r\n        'redux',\r\n        JSON.stringify({\r\n          ...s,\r\n          err: '',\r\n          fetchState: false,\r\n          searchField: '',\r\n        })\r\n      )\r\n    })\r\n    return () => unsubscribe()\r\n  }, [])\r\n\r\n  return (\r\n    <main className=\"mx-auto my-5\">\r\n      <h1 className=\"font-semibold mb-6 text-5xl text-center\">\r\n        Top subreddit Post Tracker\r\n      </h1>\r\n      <img src={SpaceSnoo} alt=\"Space Snoo\" className=\"mx-auto mb-6\" />\r\n      <p className=\"mb-8 text-center text-xl text-gray-700\">\r\n        Get the current top post from a&nbsp;subreddit.\r\n        <br />\r\n        Keep track of up to 10 subreddits. No reddit account is&nbsp;necessary!\r\n      </p>\r\n      <SearchField />\r\n      <Feed />\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport store from './store'\r\nimport { Provider } from 'react-redux'\r\nimport * as serviceWorker from './serviceWorker'\r\nimport './index.css'\r\nimport './tailwind.output.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}